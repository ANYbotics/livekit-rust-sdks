diff --git org/modules/video_coding/codecs/h264/h264_encoder_impl.h update/modules/video_coding/codecs/h264/h264_encoder_impl.h
index 19c16f3..27e59ce 100644
--- org/modules/video_coding/codecs/h264/h264_encoder_impl.h
+++ update/modules/video_coding/codecs/h264/h264_encoder_impl.h
@@ -15,8 +15,13 @@
 // Everything declared in this header is only required when WebRTC is
 // build with H264 support, please do not move anything out of the
 // #ifdef unless needed and tested.
+#ifndef WEBRTC_USE_H264
+#define WEBRTC_USE_H264
+#endif
 #ifdef WEBRTC_USE_H264
 
+#define VPL_HW
+
 #if defined(WEBRTC_WIN) && !defined(__clang__)
 #error "See: bugs.webrtc.org/9213#c13."
 #endif
@@ -31,6 +36,10 @@
 #include "api/video_codecs/scalability_mode.h"
 #include "api/video_codecs/video_encoder.h"
 #include "common_video/h264/h264_bitstream_parser.h"
+#ifdef VPL_HW
+#include "libwebrtc-hw/vpl_session.h"
+#include "libwebrtc-hw/vpl_video_encoder.h"
+#endif
 #include "modules/video_coding/codecs/h264/include/h264.h"
 #include "modules/video_coding/svc/scalable_video_controller.h"
 #include "modules/video_coding/utility/quality_scaler.h"
@@ -90,6 +99,10 @@ class H264EncoderImpl : public H264Encoder {
   }
 
  private:
+#ifdef VPL_HW
+  std::unique_ptr<sora::VplVideoEncoder> vplVideoEncoder_;
+  std::shared_ptr<sora::VplSession> vplSession_;
+#endif
   SEncParamExt CreateEncoderParams(size_t i) const;
 
   webrtc::H264BitstreamParser h264_bitstream_parser_;
@@ -124,3 +137,4 @@ class H264EncoderImpl : public H264Encoder {
 #endif  // WEBRTC_USE_H264
 
 #endif  // MODULES_VIDEO_CODING_CODECS_H264_H264_ENCODER_IMPL_H_
+
